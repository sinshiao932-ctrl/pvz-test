<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Mini PvZ - Cá»™ng máº·t trá»i vÃ  Ä‘iá»ƒm</title>
<!-- Link Ä‘áº¿n file CSS -->
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- MÃ n hÃ¬nh báº¯t Ä‘áº§u -->
<div id="startScreen">
  <div id="startContent">
    <h1>ğŸŒ» MINI PLANTS VS ZOMBIES ğŸŒ»</h1>
    <h2>ChÃ o má»«ng Ä‘áº¿n vá»›i Mini PvZ!</h2>
    <p>ğŸ¯ <strong>ÄIá»€U CHá»ˆNH TRáº¬N Äáº¤U:</strong></p>
    <p>TrÆ°á»›c khi báº¯t Ä‘áº§u, báº¡n sáº½ Ä‘Æ°á»£c chá»n tá»« 1 Ä‘áº¿n 15 loáº¡i cÃ¢y cho tráº­n Ä‘áº¥u.</p>
    <p>ğŸ”§ <strong>Xáº»ng (cay9.png) cÃ³ sáºµn máº·c Ä‘á»‹nh vÃ  khÃ´ng thá»ƒ bá».</strong></p>
    <p>ğŸŒ± <strong>Chá»n cÃ¢y cáº©n tháº­n Ä‘á»ƒ táº¡o chiáº¿n thuáº­t riÃªng!</strong></p>
    <button id="startBtn">ğŸš€ CHá»ŒN CÃ‚Y VÃ€ Báº®T Äáº¦U</button>
  </div>
</div>

<!-- MÃ n hÃ¬nh chá»n cÃ¢y -->
<div id="plantSelectScreen" style="display: none;">
  <div id="plantSelectContent">
    <h2>ğŸŒ± CHá»ŒN CÃ‚Y CHO TRáº¬N Äáº¤U ğŸŒ±</h2>
    <p>Chá»n tá»« 1 Ä‘áº¿n 15 loáº¡i cÃ¢y (khÃ´ng bao gá»“m xáº»ng - máº·c Ä‘á»‹nh cÃ³ sáºµn)</p>
    <p id="selectedCount">ÄÃ£ chá»n: 0/15</p>
    <div id="plantSelectionGrid">
      <!-- Danh sÃ¡ch cÃ¢y sáº½ Ä‘Æ°á»£c táº¡o Ä‘á»™ng -->
    </div>
    <button id="confirmPlantsBtn" disabled>XÃC NHáº¬N VÃ€ Báº®T Äáº¦U</button>
  </div>
</div>

<!-- Modal chi tiáº¿t cÃ¢y -->
<div id="plantDetailModal" style="display: none;">
  <div id="plantDetailContent">
    <button id="closeDetailBtn">âœ•</button>
    <h3 id="detailPlantName">TÃªn cÃ¢y</h3>
    <div id="detailPlantImage">
      <img src="" alt="CÃ¢y">
    </div>
    <div id="plantDetailInfo">
      <!-- ThÃ´ng tin chi tiáº¿t sáº½ Ä‘Æ°á»£c cáº­p nháº­t báº±ng JavaScript -->
    </div>
  </div>
</div>

<!-- MÃ n hÃ¬nh táº¡m dá»«ng -->
<div id="pauseScreen" class="game-paused">
  â¸ï¸ GAME ÄANG Táº M Dá»ªNG
</div>

<div id="timer" style="position: absolute; top: 10px; right: 20px; font-size: 20px; color: white;">00:00</div>
<div id="panel">
  â˜€ï¸ Máº·t trá»i: <span id="sun">100</span>
  <div class="shop-item" id="sunflower" onclick="selectPlant('sunflower')" title="GiÃ¡: 50">
    <img src="cay1.png" alt="HÆ°á»›ng dÆ°Æ¡ng">
  </div>
  <div class="shop-item" id="bigsun" onclick="selectPlant('bigsun')" title="GiÃ¡: 500">
    <img src="cay2.png" alt="HÆ°á»›ng dÆ°Æ¡ng to">
  </div>
  <div class="shop-item" id="pea" onclick="selectPlant('pea')" title="GiÃ¡: 100">
    <img src="cay3.png" alt="Pea">
  </div>
  <div class="shop-item" id="peaice" onclick="selectPlant('peaice')" title="GiÃ¡: 175">
    <img src="cay4.png" alt="Pea bÄƒng">
  </div>
  <div class="shop-item" id="pea2" onclick="selectPlant('pea2')" title="GiÃ¡: 200">
    <img src="cay5.png" alt="Pea 2 Ä‘áº§u">
  </div>
  <div class="shop-item" id="wallnut" onclick="selectPlant('wallnut')" title="GiÃ¡: 15">
    <img src="cay6.png" alt="Ã“c chÃ³">
  </div>
  <div class="shop-item" id="cherry" onclick="selectPlant('cherry')" title="GiÃ¡: 250">
    <img src="cay7.png" alt="Cherry">
  </div>
  <div class="shop-item" id="azami" onclick="selectPlant('azami')" title="GiÃ¡: 1000">
    <img src="cay8.png" alt="Azami">
  </div>
  <div class="shop-item" id="shovel" onclick="selectPlant('shovel')" title="GiÃ¡: 0">
    <img src="cay9.png" alt="Xáº»ng">
  </div>
  <div class="shop-item" id="cay10" onclick="selectPlant('cay10')" title="GiÃ¡: 1500">
    <img src="cay10.png" alt="CÃ¢y siÃªu báº¯n">
  </div>
  <!-- CÃ¢y pháº£n Ä‘áº¡n -->
  <div class="shop-item" id="cay11" onclick="selectPlant('cay11')" title="GiÃ¡: 5000 - Pháº£n Ä‘áº¡n">
    <img src="cay11.png" alt="CÃ¢y pháº£n Ä‘áº¡n">
  </div>
  <!-- CÃ¢y tÄƒng cÆ°á»ng Ä‘áº¡n -->
  <div class="shop-item" id="cay12" onclick="selectPlant('cay12')" title="GiÃ¡: 5000 - TÄƒng cÆ°á»ng Ä‘áº¡n">
    <img src="cay12.png" alt="CÃ¢y tÄƒng cÆ°á»ng Ä‘áº¡n">
  </div>
  <!-- CÃ¢y má»›i -->
  <div class="shop-item" id="cay13" onclick="selectPlant('cay13')" title="GiÃ¡: 10000 - Háº¯c diá»‡p tháº¡ch">
    <img src="cay13.png" alt="Háº¯c diá»‡p tháº¡ch">
  </div>
  <div class="shop-item" id="cay14" onclick="selectPlant('cay14')" title="GiÃ¡: 25000 - Ã“c chÃ³ siÃªu khuyá»ƒn (Giáº£m 50% sÃ¡t thÆ°Æ¡ng, Ká»¹ nÄƒng 3x3)">
    <img src="cay14.png" alt="Ã“c chÃ³ siÃªu khuyá»ƒn">
  </div>
  <div class="shop-item" id="cay15" onclick="selectPlant('cay15')" title="GiÃ¡: 20000 - Äáº¡i bÃ¡c Ä‘á»‹a ngá»¥c">
    <img src="cay15.png" alt="Äáº¡i bÃ¡c Ä‘á»‹a ngá»¥c">
  </div>
  <!-- CÃ¢y mÃ¬n háº¯c diá»‡p tháº¡ch -->
  <div class="shop-item" id="cay16" onclick="selectPlant('cay16')" title="GiÃ¡: 1500 - MÃ¬n háº¯c diá»‡p tháº¡ch (3000 mÃ¡u, há»“i 1 HP/s cho toÃ n bá»™ cÃ¢y, khi bá»‹ táº¥n cÃ´ng gÃ¢y 30 sÃ¡t thÆ°Æ¡ng toÃ n sÃ¢n)">
    <img src="cay16.png" alt="MÃ¬n háº¯c diá»‡p tháº¡ch">
  </div>
  <!-- CÃ¢y tá»i biáº¿n dá»‹ -->
  <div class="shop-item" id="cay17" onclick="selectPlant('cay17')" title="GiÃ¡: 2000 - Tá»i biáº¿n dá»‹ (Báº¯n Ä‘áº¡n táº§m 2 Ã´, 10 sÃ¡t thÆ°Æ¡ng + báº­t lÃ¹i 0.5 Ã´, khi bá»‹ táº¥n cÃ´ng Ä‘áº©y zombie sang hÃ ng khÃ¡c + lÃ m cháº­m 80% 5s)">
    <img src="cay17.png" alt="Tá»i biáº¿n dá»‹">
  </div>
  <!-- CÃ¢y tá»i biáº¿n dá»‹ phiÃªn báº£n nÃ©m Ä‘áº¡n -->
  <div class="shop-item" id="cay18" onclick="selectPlant('cay18')" title="GiÃ¡: 50000 - Tá»i biáº¿n dá»‹ nÃ©m Ä‘áº¡n (30 mÃ¡u, nÃ©m Ä‘áº¡n náº£y, 30 sÃ¡t thÆ°Æ¡ng + 3 Ä‘áº¡n náº£y 20 sÃ¡t thÆ°Æ¡ng, giáº£m tá»‘c 30% vÄ©nh viá»…n, khi bá»‹ táº¥n cÃ´ng Ä‘áº©y zombie + giáº£m 99% tá»‘c 10s)">
    <img src="cay18.png" alt="Tá»i biáº¿n dá»‹ nÃ©m Ä‘áº¡n">
  </div>
  <!-- CÃ¢y 19 - Quáº£ Ã³c chÃ³ Ä‘á»‹a ngá»¥c sinh Ä‘Ã´i -->
  <div class="shop-item disabled" id="cay19" onclick="selectPlant('cay19')" title="ÄÃ£ tiÃªu diá»‡t Sá»© giáº£ khe ná»©t: 0/1 - GiÃ¡: 0 (Má»Ÿ khÃ³a khi tiÃªu diá»‡t 1 Sá»© giáº£ khe ná»©t)">
    <img src="cay19.png" alt="Ã“c chÃ³ Ä‘á»‹a ngá»¥c sinh Ä‘Ã´i">
  </div>
  <div class="shop-item" id="noSelect" onclick="deselectPlant()" title="KhÃ´ng chá»n cÃ¢y">
    <img src="no_select_icon.png" alt="KhÃ´ng chá»n cÃ¢y">
  </div>
  <button id="pauseBtn" onclick="togglePause()">â¸ï¸ Táº¡m dá»«ng</button>
  <span id="selected"></span>
</div>

<div id="game">
  <div id="scoreBoard">ğŸ† Äiá»ƒm: <span id="score">0</span></div>
</div>

<audio id="shootSound" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg"></audio>
<audio id="boomSound" src="https://actions.google.com/sounds/v1/explosions/explosion.ogg"></audio>
<audio id="dieSound" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg"></audio>
<audio id="garlicSound" src="https://actions.google.com/sounds/v1/cartoon/slide_whistle.ogg"></audio>
<audio id="throwSound" src="https://actions.google.com/sounds/v1/cartoon/boing.ogg"></audio>
<audio id="bounceSound" src="https://actions.google.com/sounds/v1/cartoon/cartoon_bounce.ogg"></audio>
<audio id="hellfireSound" src="https://actions.google.com/sounds/v1/fire/fire_large.ogg"></audio>

<!-- Cáº¤U HÃŒNH GAME -->
<script>
// Biáº¿n toÃ n cá»¥c Ä‘á»ƒ cÃ¡c file JS cÃ³ thá»ƒ truy cáº­p
let selectedPlants = new Set();

// =============== Cáº¤U HÃŒNH Dá»„ CHá»ˆNH Sá»¬A ===============
const PLANT_CONFIG = {
  defaultSize: {
    width: 60,
    height: 60
  },
  
  plants: {
    sunflower: {
      name: "HÆ°á»›ng dÆ°Æ¡ng",
      cost: 50,
      hp: 20,
      image: "cay1.png",
      width: 60,
      height: 60,
      description: "Sáº£n xuáº¥t máº·t trá»i má»—i 5 giÃ¢y.",
      action: {
        type: "sunProducer",
        interval: 5000,
        amount: 25
      }
    },
    bigsun: {
      name: "HÆ°á»›ng dÆ°Æ¡ng to",
      cost: 500,
      hp: 25,
      image: "cay2.png",
      width: 65,
      height: 65,
      description: "Sáº£n xuáº¥t máº·t trá»i liÃªn tá»¥c, má»—i giÃ¢y 10 máº·t trá»i.",
      action: {
        type: "sunProducer",
        interval: 1000,
        amount: 10
      }
    },
    pea: {
      name: "Pea",
      cost: 100,
      hp: 15,
      image: "cay3.png",
      width: 60,
      height: 60,
      description: "Báº¯n Ä‘áº¡n cÆ¡ báº£n, má»—i 1.5 giÃ¢y 1 viÃªn, 2 sÃ¡t thÆ°Æ¡ng.",
      action: {
        type: "shooter",
        interval: 1500,
        bullet: { color: "yellow", power: 2, count: 1 }
      }
    },
    peaice: {
      name: "Pea bÄƒng",
      cost: 175,
      hp: 15,
      image: "cay4.png",
      width: 60,
      height: 60,
      description: "Báº¯n Ä‘áº¡n bÄƒng, lÃ m cháº­m zombie, 1 sÃ¡t thÆ°Æ¡ng.",
      action: {
        type: "shooter",
        interval: 2000,
        bullet: { color: "blue", power: 1, count: 1, freeze: true }
      }
    },
    pea2: {
      name: "Pea 2 Ä‘áº§u",
      cost: 200,
      hp: 15,
      image: "cay5.png",
      width: 65,
      height: 60,
      description: "Báº¯n 2 viÃªn Ä‘áº¡n má»—i láº§n, 2 sÃ¡t thÆ°Æ¡ng má»—i viÃªn.",
      action: {
        type: "shooter",
        interval: 2000,
        bullet: { color: "green", power: 2, count: 2 }
      }
    },
    wallnut: {
      name: "Ã“c chÃ³",
      cost: 15,
      hp: 500,
      image: "cay6.png",
      width: 70,
      height: 70,
      description: "CÃ³ nhiá»u mÃ¡u, dÃ¹ng Ä‘á»ƒ cháº·n Ä‘Æ°á»ng zombie.",
      action: { type: "none" }
    },
    cherry: {
      name: "Cherry",
      cost: 250,
      hp: 10,
      image: "cay7.png",
      width: 60,
      height: 60,
      description: "Tá»± ná»• sau 1.5 giÃ¢y, gÃ¢y 1000 sÃ¡t thÆ°Æ¡ng pháº¡m vi 1.5 Ã´.",
      action: {
        type: "exploder",
        delay: 1500,
        damage: 1000,
        range: 1.5
      }
    },
    azami: {
      name: "Azami",
      cost: 1000,
      hp: 50,
      image: "cay8.png",
      width: 60,
      height: 60,
      description: "Báº¯n Ä‘áº¡n nhanh, Ä‘áº©y lÃ¹i zombie, 10 sÃ¡t thÆ°Æ¡ng, tá»‘n 25 máº·t trá»i má»—i láº§n báº¯n.",
      action: {
        type: "shooter",
        interval: 700,
        bullet: { color: "az", power: 10, count: 1, knock: true },
        cost: 25
      },
      limitPerRow: 1
    },
    cay10: {
      name: "CÃ¢y siÃªu báº¯n",
      cost: 1500,
      hp: 90,
      image: "cay10.png",
      width: 90,
      height: 70,
      description: "Báº¯n Ä‘áº¡n máº¡nh má»—i 4 giÃ¢y, 30 sÃ¡t thÆ°Æ¡ng.",
      action: {
        type: "shooter",
        interval: 4000,
        bullet: { color: "red", power: 30, count: 1 }
      },
      limitPerRow: 1
    },
    shovel: {
      name: "Xáº»ng",
      cost: 0,
      hp: 0,
      image: "cay9.png",
      width: 50,
      height: 50,
      description: "DÃ¹ng Ä‘á»ƒ Ä‘Ã o bá» cÃ¢y Ä‘Ã£ trá»“ng.",
      action: { type: "tool" }
    },
    cay11: {
      name: "CÃ¢y pháº£n Ä‘áº¡n",
      cost: 5000,
      hp: 10,
      maxHp: 10,
      image: "cay11.png",
      width: 60,
      height: 60,
      description: "Pháº£n láº¡i Ä‘áº¡n cá»§a zombie vá» phÃ­a chÃºng.",
      action: { type: "reflector" }
    },
    cay12: {
      name: "CÃ¢y tÄƒng cÆ°á»ng Ä‘áº¡n",
      cost: 5000,
      hp: 50,
      image: "cay12.png",
      width: 60,
      height: 60,
      description: "TÄƒng sÃ¡t thÆ°Æ¡ng cho Ä‘áº¡n cá»§a cÃ¡c cÃ¢y xung quanh.",
      action: { type: "enhancer" }
    },
    cay13: {
      name: "Háº¯c diá»‡p tháº¡ch",
      cost: 10000,
      hp: 1700,
      maxHp: 1700,
      image: "cay13.png",
      width: 70,
      height: 70,
      description: "CÃ³ nhiá»u mÃ¡u, há»“i 30 HP má»—i giÃ¢y.",
      action: { 
        type: "blocker",
        healPerSecond: 30
      }
    },
    cay14: {
      name: "Ã“c chÃ³ siÃªu khuyá»ƒn",
      cost: 0,
      hp: 8000,
      maxHp: 8000,
      image: "cay14.png",
      width: 80,
      height: 80,
      description: "Giáº£m 50% sÃ¡t thÆ°Æ¡ng, má»—i 3 giÃ¢y gÃ¢y 100 sÃ¡t thÆ°Æ¡ng pháº¡m vi 1 Ã´, nhÃ¢n Ä‘Ã´i hiá»‡u quáº£ há»“i mÃ¡u.",
      action: {
        type: "areaHealer",
        interval: 3000,
        damage: 100,
        range: 1,
        healMultiplier: 1.0,
        damageReduction: 0.5
      }
    },
    cay15: {
      name: "Äáº¡i bÃ¡c Ä‘á»‹a ngá»¥c",
      cost: 0,
      hp: 600,
      image: "cay15.png",
      width: 70,
      height: 70,
      description: "Báº¯n Ä‘áº¡n Ä‘á»‹a ngá»¥c má»—i 0.8 giÃ¢y, 10 sÃ¡t thÆ°Æ¡ng + Ä‘áº©y lÃ¹i.",
      action: {
        type: "hellCannon",
        interval: 800,
        bullet: { color: "hell-cannon", power: 10, count: 1, knock: true }
      }
    },
    cay16: {
      name: "MÃ¬n háº¯c diá»‡p tháº¡ch",
      cost: 1500,
      hp: 3000,
      maxHp: 3000,
      image: "cay16.png",
      width: 60,
      height: 60,
      description: "3000 mÃ¡u, há»“i 1 HP/giÃ¢y cho toÃ n bá»™ cÃ¢y, khi bá»‹ táº¥n cÃ´ng gÃ¢y 30 sÃ¡t thÆ°Æ¡ng toÃ n sÃ¢n.",
      action: {
        type: "mine",
        healPerSecond: 1,
        explosionDamage: 30,
        explosionOnHit: true
      }
    },
    cay17: {
      name: "Tá»i biáº¿n dá»‹",
      cost: 2000,
      hp: 80,
      image: "cay17.png",
      width: 60,
      height: 60,
      description: "Báº¯n Ä‘áº¡n táº§m 2 Ã´, 10 sÃ¡t thÆ°Æ¡ng + Ä‘áº©y lÃ¹i 0.5 Ã´. Khi bá»‹ táº¥n cÃ´ng: Ä‘áº©y zombie sang hÃ ng khÃ¡c + lÃ m cháº­m 80% trong 5s.",
      action: {
        type: "garlic",
        interval: 2000,
        bullet: { 
          color: "garlic-bullet", 
          power: 10, 
          count: 1, 
          knock: true,
          knockDistance: 0.5,
          range: 2
        },
        defenseEffect: {
          teleportDistance: 1,
          slowAmount: 0.8,
          slowDuration: 5000
        }
      }
    },
    cay18: {
      name: "Tá»i biáº¿n dá»‹ nÃ©m Ä‘áº¡n",
      cost: 50000,
      hp: 80,
      maxHp: 80,
      image: "cay18.png",
      width: 65,
      height: 65,
      description: "30 mÃ¡u, nÃ©m Ä‘áº¡n náº£y, 30 sÃ¡t thÆ°Æ¡ng + 3 Ä‘áº¡n náº£y 20 sÃ¡t thÆ°Æ¡ng, giáº£m tá»‘c 30% vÄ©nh viá»…n. Khi bá»‹ táº¥n cÃ´ng: Ä‘áº©y zombie + giáº£m 99% tá»‘c Ä‘á»™ trong 10s.",
      action: {
        type: "thrower",
        interval: 3000,
        bullet: {
          image: "dancay18.png",
          mainDamage: 80,
          bounceDamage: 20,
          bounceCount: 3,
          slowAmount: 0.3,
          maxSlow: 1.0,
          throwHeight: 60
        },
        defenseEffect: {
          teleportDistance: 1,
          extremeSlowAmount: 0.99,
          extremeSlowDuration: 10000
        }
      }
    },
    cay19: {
      name: "Ã“c chÃ³ Ä‘á»‹a ngá»¥c sinh Ä‘Ã´i",
      cost: 0,
      baseCost: 0,
      hp: 30000,
      maxHp: 30000,
      image: "cay19.png",
      width: 85,
      height: 85,
      description: "Má»Ÿ khÃ³a khi tiÃªu diá»‡t 1 Sá»© giáº£ khe ná»©t. 30000 mÃ¡u, giáº£m 80% sÃ¡t thÆ°Æ¡ng, há»“i 100 HP khi bá»‹ Ä‘Ã¡nh, tÄƒng 500 sÃ¡t thÆ°Æ¡ng cho Ä‘áº¡n.",
      action: {
        type: "hellfireWalnut",
        sunPerMana: 300,
        manaPerSecond: 25,
        damageReduction: 0.8,
        healOnHit: 100,
        bulletEnhanceDamage: 500,
        blocksZombies: true
      }
    }
  }
};

// =============== Cáº¤U HÃŒNH THÃ‚Y MA Dá»„ CHá»ˆNH Sá»¬A ===============
const ZOMBIE_CONFIG = {
  attackInterval: 1000,
  
  zombies: {
    normal: {
      name: "ThÃ¢y ma thÆ°á»ng",
      baseHp: 44,
      speed: 0.01,
      attackDamage: 2,
      sunReward: 25,
      scoreReward: 1
    },
    red: {
      name: "ThÃ¢y ma Ä‘á»",
      baseHp: 62,
      speed: 0.007,
      attackDamage: 3,
      hpBonusPerKill: 5,
      sunReward: 25,
      scoreReward: 1
    },
    big: {
      name: "ThÃ¢y ma to",
      baseHp: 90,
      speed: 0.0025,
      attackDamage: 5,
      sunReward: 25,
      scoreReward: 1
    },
    smart: {
      name: "ThÃ¢y ma thÃ´ng minh",
      baseHp: 90,
      speed: 0.013,
      attackDamage: 3,
      sunReward: 25,
      scoreReward: 1
    },
    purple: {
      name: "Boss",
      baseHp: 500,
      speed: 0.001,
      attackDamage: 10,
      sunReward: 25,
      scoreReward: 1
    },
    thayma2: {
      name: "ThÃ¢y ma 2 - Äi xuyÃªn qua cÃ¢y",
      baseHp: 100,
      speed: 0.015,
      attackDamage: 0,
      canAttack: false,
      passThroughPlants: true,
      sunReward: 50,
      scoreReward: 3
    },
    thayma3: {
      name: "ThÃ¢y ma 3 - Cháº·n Ä‘Æ°á»ng",
      baseHp: 3000,
      speed: 0.02,
      attackDamage: 0,
      canAttack: false,
      stopsAtPlant: true,
      sunReward: 75,
      scoreReward: 5
    },
    thayma4: {
      name: "ThÃ¢y ma 4 - Bom ná»•",
      baseHp: 500,
      speed: 0.0015,
      attackDamage: 999,
      explosionOnDeath: true,
      explosionRange: 1.5,
      sunReward: 100,
      scoreReward: 10
    },
    thayma5: {
      name: "ThÃ¢y ma 5 - Chiáº¿n binh báº¥t kháº£ chiáº¿n báº¡i",
      baseHp: 8000,
      speed: 0.018,
      attackDamage: 5,
      immuneToControl: true,
      immuneToKnockback: true,
      canAttack: true,
      sunReward: 150,
      scoreReward: 15
    },
    thayma6: {
      name: "ThÃ¢y ma 6 - QuÃ¡i váº­t tá»‘i thÆ°á»£ng",
      baseHp: 5000000,
      speed: 0.01,
      attackDamage: 0,
      canAttack: false,
      immuneToControl: true,
      immuneToKnockback: true,
      immuneToExplosion: true,
      stopsAtDistance: 2,
      rangedAttack: true,
      rangedDamage: 200,
      rangedInterval: 5000,
      rangedTarget: "first",
      sunReward: 1000,
      scoreReward: 100,
      winOnKill: true
    },
    // THÃ‚Y MA 7 - Sá»¨ GIáº¢ KHE Ná»¨T
    thayma7: {
      name: "Sá»© giáº£ khe ná»©t",
      baseHp: 60000,
      speed: 0.015,
      attackDamage: 999,
      attackInterval: 3000,
      canAttack: true,
      knockbackOnHit: true,
      knockbackDistance: 1,
      sunReward: 500,
      scoreReward: 50
    },
    // THÃ‚Y MA 8 - BARON NASHOR
    thayma8: {
      name: "Baron Nashor",
      baseHp: 100000,
      speed: 0.02,
      attackDamage: 0,
      canAttack: false,
      stopsAtDistance: 2,
      immuneToControl: true,
      immuneToKnockback: true,
      immuneToExplosion: true,
      buffsThayma7: true,
      buffSpeedAmount: 1.0,
      buffAttackSpeedAmount: 1.0,
      spawnsThayma7OnDeath: true,
      spawnedThayma7Hp: 300000,
      spawnOnAppearance: true,
      sunReward: 1000,
      scoreReward: 200
    },
    // THÃ‚Y MA 9 - QUá»¶ Äá» I
    thayma9: {
      name: "Quá»· Ä‘á» I",
      baseHp: 2000,
      speed: 0.025,
      attackDamage: 10,
      canAttack: true,
      canShoot: true,
      shootInterval: 500,
      shootDamage: 30,
      sunReward: 200,
      scoreReward: 20
    },
    // THÃ‚Y MA 10 - QUá»¶ Äá» II
    thayma10: {
      name: "Quá»· Ä‘á» II",
      baseHp: 50000,
      speed: 0.05,
      attackDamage: 15,
      canAttack: true,
      canShoot: true,
      shootInterval: 400,
      shootDamage: 100,
      immuneToControl: true,
      sunReward: 300,
      scoreReward: 30
    }
  },
  
  timeUpdates: {
    interval: 30,
    hpIncrease: 10,
    speedIncrease: 0.01
  }
};

// Khá»Ÿi táº¡o nÃºt báº¯t Ä‘áº§u
document.getElementById("startBtn").onclick = function() {
  // Kiá»ƒm tra xem cÃ³ lá»±a chá»n Ä‘Ã£ lÆ°u khÃ´ng
  const hasSavedSelection = loadPlantSelection();
  
  if (hasSavedSelection && selectedPlants.size > 0) {
    // Há»i ngÆ°á»i chÆ¡i cÃ³ muá»‘n dÃ¹ng lá»±a chá»n cÅ© khÃ´ng
    const plantCount = selectedPlants.size;
    if (confirm(`Báº¡n cÃ³ muá»‘n sá»­ dá»¥ng lá»±a chá»n cÃ¢y tá»« láº§n chÆ¡i trÆ°á»›c? (CÃ³ ${plantCount} cÃ¢y Ä‘Ã£ chá»n)\n\nChá»n "OK" Ä‘á»ƒ sá»­ dá»¥ng lá»±a chá»n cÅ©.\nChá»n "Cancel" Ä‘á»ƒ chá»n láº¡i cÃ¢y.`)) {
      document.getElementById("startScreen").style.display = "none";
      updateShopWithSelectedPlants();
      // ThÃªm nÃºt chá»n láº¡i cÃ¢y
      addResetButtonToGame();
      // Khá»Ÿi táº¡o game
      initGameAfterSelection();
      return;
    }
  }
  
  // Hiá»ƒn thá»‹ mÃ n hÃ¬nh chá»n cÃ¢y
  showPlantSelectionScreen();
};
</script>

<!-- File JavaScript chÃ­nh cá»§a game -->
<script src="plant-selection.js"></script>
<script src="game-main.js"></script>
<!-- ThÃªm vÃ o cuá»‘i file index.html, trÆ°á»›c </body> -->
<script>
// Xá»­ lÃ½ phÃ­m ESC Ä‘á»ƒ Ä‘Ã³ng modal
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    const modal = document.getElementById('plantDetailModal');
    if (modal && modal.style.display === 'flex') {
      closePlantDetail();
    }
  }
});

// Xá»­ lÃ½ click ra ngoÃ i modal
document.addEventListener('DOMContentLoaded', function() {
  const modal = document.getElementById('plantDetailModal');
  if (modal) {
    modal.addEventListener('click', function(e) {
      if (e.target === this) {
        closePlantDetail();
      }
    });
  }
});
</script>
</body>
</html>